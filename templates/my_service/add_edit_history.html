<ion-view title="{{'APP_NAME' | translate}}">
    <ion-nav-buttons side="left">
        <a class="button icon icon-left ion-chevron-left button-clear" href="#/my-service/list-history/{{mCarInfo.id}}"></a>
    </ion-nav-buttons>
    <ion-nav-buttons side="right" ng-controller="MyServiceAddEditHistoryCtrl">
        <a class="button button-clear" ng-click="saveHistory(mHistory, $event)" ng-disabled="fw.addHistoryForm.$invalid" translate="SAVE" href="#/"></a>
    </ion-nav-buttons>
    <ion-content class="has-header">
        <div class="container myService">
            <div class="contentHeader">
                <app-logo></app-logo>
                <div class="titleBlock">
                    <div class="title" translate="MY_SERVICE"></div>
                    <div class="subtitle" ng-if="isEdit" translate="MY_SERVICE_EDIT_HISTORY"></div>
                    <div class="subtitle" ng-if="!isEdit" translate="MY_SERVICE_ADD_HISTORY"></div>
                </div>
                <div class="clearfix"></div>
            </div>
            <form action="" name="fw.addHistoryForm">
				<div class="inputBlock noSign">
                    <label translate="MY_SERVICE_REMINDER_TITLE"></label>
                    <div class="input">
                        <input type="text" class="text-right gray" name="title" capitalize-first ng-model="mHistory.title" required />
                        <span class="dotted"></span>
                    </div>
                    <small class="input-error" ng-class="{'active' : fw.addHistoryForm.title.$dirty && fw.addHistoryForm.title.$invalid}" translate="FIELD_REQUIRED"></small> 
                </div>
                <div class="inputBlock noSign">
                    <label translate="MY_SERVICE_HISTORY_DATE"></label>
                    <div class="input">
                        <input type="hidden" name="date_of_event" class="text-right gray" ng-model="mHistory.date_of_event" required />
						<span class="text-right gray" ng-bind="mHistory.date_of_event | date:'MMMM d, y h:mm a'"></span>
                        <span class="dotted"></span>
                        <small class="input-error" ng-class="{'active' : fw.addHistoryForm.date.$dirty && fw.addHistoryForm.date.$invalid}" translate="VALIDATION_ENTER_VALID_DATE" ></small> 
                    </div>
					<datetimepicker ng-model="mHistory.date_of_event" data-datetimepicker-config="{ minView: 'day' }"/>
                </div>
				<div class="inputBlock noSign">
                    <label translate="MY_SERVICE_REMINDER_MILEAGE"></label>
                    <div class="input">
                        <input type="number" name="mileage" class="text-right gray" string-to-number ng-model="mHistory.mileage" required />
                        <span class="dotted"></span>
                    </div>
                    <small class="input-error" ng-class="{'active' : fw.addHistoryForm.mileage.$dirty && fw.addHistoryForm.mileage.$invalid}" translate="FIELD_REQUIRED" ></small> 
                </div>
                <div class="inputBlock noSign textarea">
                    <label translate="MY_SERVICE_HISTORY_DESCRIPTION"></label>
                    <div class="input">
                        <textarea type="text" rows="15" name="title" ng-model="mHistory.description" required ></textarea>
                    </div>
                    <small class="input-error" ng-class="{'active' : fw.addHistoryForm.description.$dirty && fw.addHistoryForm.description.$invalid}" translate="FIELD_REQUIRED"></small> 
                </div>
            </form>
			<div ng-if="isEdit">
				<a class="button-delete button-full entityDelete" href="#" ng-click="deleteReminderHistory(mHistory.id)" title="Delete" translate="DELETE_HISTORY"></a>
			</div>
        </div>
    </ion-content>
</ion-view>
<footer active-item="myservice"></footer>